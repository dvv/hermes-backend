# @author Igor compiler
# @doc Compiler version: igorc 2.1.4
# DO NOT EDIT THIS FILE - it is machine generated

defmodule WebProtocol.HermesTaskService.Impl do

  @behaviour WebProtocol.HermesTaskService

  # ----------------------------------------------------------------------------

  defmacro __using__(which) when is_atom(which), do: apply(__MODULE__, which, [])

  def router() do
    quote do
      match "/api/tasks/sync_bamboo/monthly/:year/:month", to: WebProtocol.HermesTaskService.TaskSyncBamboo
      match "/api/tasks/sync_ldap", to: WebProtocol.HermesTaskService.TaskSyncLdap
    end
  end

  # ----------------------------------------------------------------------------

  @doc """
  Synchronize with BambooHR
  """
  @spec sync_bamboo(
    request_content :: WebProtocol.SyncBambooTaskRequest.t(),
    year :: integer,
    month :: integer,
    session :: any()
  ) :: DataProtocol.GenericResponse.t()
  @impl true
  def sync_bamboo(
    request_content,
    year,
    month,
    session
  ) when
    is_struct(request_content, WebProtocol.SyncBambooTaskRequest) and
    is_integer(year) and
    is_integer(month)
  do
    unless Hermes.can_sync_bamboo?(session), do: raise DataProtocol.ForbiddenError
    raise "not_yet_implemented"
  end

  # ----------------------------------------------------------------------------

  @doc """
  Synchronize with LDAP
  """
  @spec sync_ldap(
    request_content :: CommonProtocol.Empty.t(),
    session :: any()
  ) :: DataProtocol.GenericResponse.t()
  @impl true
  def sync_ldap(
    request_content,
    session
  ) when
    is_struct(request_content, CommonProtocol.Empty)
  do
    unless Hermes.can_sync_ldap?(session), do: raise DataProtocol.ForbiddenError
    raise "not_yet_implemented"
  end

end
